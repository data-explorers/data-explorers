import{S as _,i as b,s as M,L as S,ae as w,F as P,G as q,H,x as C,u as L,e as V,c as Y,a as K,d as z,f as Q,r as W,w as X,y as v,a4 as I,D as p,j as A,m as R,o as E,v as j,Y as J}from"./vendor-83798d90.js";import{L as m,E as $}from"./index-cea82726.js";import{f as ee,b as te}from"./mapUtils-8c5a7127.js";function ne(l,e,a){const{getMap:n}=S(m);let{icon:t}=e,{callback:r}=e,{states:s}=e,{title:f}=e,i;w(()=>{i.remove()});function y(){return i}return l.$$set=u=>{"icon"in u&&a(0,t=u.icon),"callback"in u&&a(1,r=u.callback),"states"in u&&a(2,s=u.states),"title"in u&&a(3,f=u.title)},l.$$.update=()=>{l.$$.dirty&47&&(i||(t&&r?a(5,i=m.easyButton(t,r,f).addTo(n())):a(5,i=m.easyButton(s).addTo(n()))))},[t,r,s,f,y,i]}class Z extends _{constructor(e){super();b(this,e,ne,null,M,{icon:0,callback:1,states:2,title:3,getButton:4})}get getButton(){return this.$$.ctx[4]}}function ae(l,e,a){const{getMap:n}=S(m);let{baseLayersData:t={}}=e,{overlayLayersData:r={}}=e,s={},f={};Object.entries(t).forEach(([u,g],h)=>{let k=m.tileLayer(g.url,g.options);a(3,s[u]=k,s),h===0&&k.addTo(n())}),Object.entries(r).forEach(([u,g],h)=>{a(0,r[u]=m.tileLayer(g.url,g.options),r)});let i;w(()=>{i.remove()});function y(){return i}return l.$$set=u=>{"baseLayersData"in u&&a(1,t=u.baseLayersData),"overlayLayersData"in u&&a(0,r=u.overlayLayersData)},l.$$.update=()=>{l.$$.dirty&24&&(i||a(4,i=m.control.layers(s,f).addTo(n())))},[r,t,y,s,i]}class re extends _{constructor(e){super();b(this,e,ae,null,M,{baseLayersData:1,overlayLayersData:0,getLayerControl:2})}get getLayerControl(){return this.$$.ctx[2]}}function le(l,e,a){const{getMap:n}=S(m);let{items:t}=e,r;w(()=>{r.remove()});function s(){return r}return l.$$set=f=>{"items"in f&&a(0,t=f.items)},l.$$.update=()=>{l.$$.dirty&5&&(r&&(r.remove(),a(2,r=null)),r||a(2,r=m.markerClusterGroup({singleMarkerMode:!0}).addTo(n())),t.length>0&&t.forEach(f=>{r.addLayer(m.marker([f.latitude,f.longitude]))}))},[t,s,r]}class _e extends _{constructor(e){super();b(this,e,le,null,M,{items:0,getLayerControl:1})}get getLayerControl(){return this.$$.ctx[1]}}function F(l){let e;const a=l[17].default,n=p(a,l,l[16],null);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,r){n&&n.m(t,r),e=!0},p(t,r){n&&n.p&&(!e||r&65536)&&P(n,a,t,t[16],e?H(a,t[16],r,null):q(t[16]),null)},i(t){e||(C(n,t),e=!0)},o(t){L(n,t),e=!1},d(t){n&&n.d(t)}}}function se(l){let e,a,n=l[0]&&F(l);return{c(){e=V("div"),n&&n.c()},l(t){e=Y(t,"DIV",{});var r=K(e);n&&n.l(r),r.forEach(z)},m(t,r){Q(t,e,r),n&&n.m(e,null),a=!0},p(t,[r]){t[0]?n?(n.p(t,r),r&1&&C(n,1)):(n=F(t),n.c(),C(n,1),n.m(e,null)):n&&(W(),L(n,1,1,()=>{n=null}),X())},i(t){a||(C(n),a=!0)},o(t){L(n),a=!1},d(t){t&&z(e),n&&n.d()}}}function ie(l,e,a){let{$$slots:n={},$$scope:t}=e;const{getMap:r}=S(m);let{latLngBounds:s}=e,{color:f="#3388ff"}=e,{weight:i=3}=e,{opacity:y=1}=e,{lineCap:u="round"}=e,{lineJoin:g="round"}=e,{dashArray:h=null}=e,{dashOffset:k=null}=e,{fill:B=!0}=e,{fillColor:c="#3388ff"}=e,{fillOpacity:x=.2}=e,{fillRule:D="evenodd"}=e,{options:T={}}=e,{events:O=[]}=e,d;v(m.Layer,{getLayer:()=>d});const U=I();let G;w(()=>{G.unregister(),d.removeFrom(r())});function N(){return d}return l.$$set=o=>{"latLngBounds"in o&&a(1,s=o.latLngBounds),"color"in o&&a(2,f=o.color),"weight"in o&&a(3,i=o.weight),"opacity"in o&&a(4,y=o.opacity),"lineCap"in o&&a(5,u=o.lineCap),"lineJoin"in o&&a(6,g=o.lineJoin),"dashArray"in o&&a(7,h=o.dashArray),"dashOffset"in o&&a(8,k=o.dashOffset),"fill"in o&&a(9,B=o.fill),"fillColor"in o&&a(10,c=o.fillColor),"fillOpacity"in o&&a(11,x=o.fillOpacity),"fillRule"in o&&a(12,D=o.fillRule),"options"in o&&a(13,T=o.options),"events"in o&&a(14,O=o.events),"$$scope"in o&&a(16,t=o.$$scope)},l.$$.update=()=>{l.$$.dirty&32767&&(d||(a(0,d=m.rectangle(s,T).addTo(r())),G=new $(d,U,O)),d.setBounds(s),d.setStyle({color:f,weight:i,opacity:y,lineCap:u,lineJoin:g,dashArray:h,dashOffset:k,fill:B,fillColor:c,fillOpacity:x,fillRule:D}))},[d,s,f,i,y,u,g,h,k,B,c,x,D,T,O,N,t,n]}class be extends _{constructor(e){super();b(this,e,ie,se,M,{latLngBounds:1,color:2,weight:3,opacity:4,lineCap:5,lineJoin:6,dashArray:7,dashOffset:8,fill:9,fillColor:10,fillOpacity:11,fillRule:12,options:13,events:14,getRectangle:15})}get getRectangle(){return this.$$.ctx[15]}}function oe(l,e,a){const{getMap:n}=S(m);let{position:t="topright"}=e,{options:r={}}=e,s;w(()=>{s.remove()});function f(){return s}return l.$$set=i=>{"position"in i&&a(0,t=i.position),"options"in i&&a(1,r=i.options)},l.$$.update=()=>{l.$$.dirty&11&&(s||a(3,s=m.control.scale(r).addTo(n())),s.setPosition(t))},[t,r,f,s]}class Me extends _{constructor(e){super();b(this,e,oe,null,M,{position:0,options:1,getScaleControl:2})}get getScaleControl(){return this.$$.ctx[2]}}function ue(l){let e,a,n={icon:'<span class="text-3xl leading-6">&sdotb;</span>',callback:l[3],title:"click to fit all observations on map"};return e=new Z({props:n}),l[4](e),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){E(e,t,r),a=!0},p(t,[r]){const s={};r&3&&(s.callback=t[3]),e.$set(s)},i(t){a||(C(e.$$.fragment,t),a=!0)},o(t){L(e.$$.fragment,t),a=!1},d(t){l[4](null),j(e,t)}}}function ce(l,e,a){let{coordinates:n}=e,{map:t}=e,r;const s=()=>ee(n,t);function f(i){J[i?"unshift":"push"](()=>{r=i,a(2,r)})}return l.$$set=i=>{"coordinates"in i&&a(0,n=i.coordinates),"map"in i&&a(1,t=i.map)},l.$$.update=()=>{l.$$.dirty&5&&r&&(n.length===0?r.getButton().disable():r.getButton().enable())},[n,t,r,s,f]}class Ce extends _{constructor(e){super();b(this,e,ce,ue,M,{coordinates:0,map:1})}}function fe(l){let e,a;return e=new re({props:{baseLayersData:l[0]}}),{c(){A(e.$$.fragment)},l(n){R(e.$$.fragment,n)},m(n,t){E(e,n,t),a=!0},p(n,[t]){const r={};t&1&&(r.baseLayersData=n[0]),e.$set(r)},i(n){a||(C(e.$$.fragment,n),a=!0)},o(n){L(e.$$.fragment,n),a=!1},d(n){j(e,n)}}}function ge(l,e,a){let{country:n}=e,t=te(),r={Street:t.OpenStreetMap,Minimal:t.GBIFGeyser,Terrain:t.StamenTerrain};return n==="USA"&&(r.Satellite=t.USGSImagery),l.$$set=s=>{"country"in s&&a(1,n=s.country)},[r,n]}class Le extends _{constructor(e){super();b(this,e,ge,fe,M,{country:1})}}function me(l){let e,a,n={states:l[1]};return e=new Z({props:n}),l[10](e),{c(){A(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){E(e,t,r),a=!0},p(t,[r]){const s={};e.$set(s)},i(t){a||(C(e.$$.fragment,t),a=!0)},o(t){L(e.$$.fragment,t),a=!1},d(t){l[10](null),j(e,t)}}}function ye(l,e,a){let{useMarkerCluster:n}=e,{observationsDisplayCount:t}=e,{clusterLimit:r}=e,{userSelectedMarkerType:s}=e,{coordinates:f}=e,{zoomLevel:i}=e,{maxZoom:y}=e;const u=I();let g,h={states:[{stateName:"show-markers",icon:'<span class="text-4xl font-black leading-5">&Colon;</span>',title:"click to show clustered markers",onClick(c){u("changeMarkerModeOnClick",{useMarkerCluster:!0,userSelectedMarkerType:"clusters"}),c.state("show-clusters")}},{stateName:"show-clusters",icon:'<span class="text-6xl leading-6">&middot;</span>',title:"click to show individual markers",onClick(c){u("changeMarkerModeOnClick",{useMarkerCluster:!1,userSelectedMarkerType:"markers"}),c.state("show-markers")}}]};function k(){return g.getButton()}function B(c){J[c?"unshift":"push"](()=>{g=c,a(0,g)})}return l.$$set=c=>{"useMarkerCluster"in c&&a(2,n=c.useMarkerCluster),"observationsDisplayCount"in c&&a(3,t=c.observationsDisplayCount),"clusterLimit"in c&&a(4,r=c.clusterLimit),"userSelectedMarkerType"in c&&a(5,s=c.userSelectedMarkerType),"coordinates"in c&&a(6,f=c.coordinates),"zoomLevel"in c&&a(7,i=c.zoomLevel),"maxZoom"in c&&a(8,y=c.maxZoom)},l.$$.update=()=>{l.$$.dirty&421&&i&&y&&(n&&i+1>=y?(g.getButton().state("show-markers"),u("changeMarkerModeAutomatic",{useMarkerCluster:!1})):!n&&s==="clusters"&&i===y-2&&(g.getButton().state("show-clusters"),u("changeMarkerModeAutomatic",{useMarkerCluster:!0}))),l.$$.dirty&61&&t>0&&(!n&&t>=r?(g.getButton().state("show-clusters"),u("changeMarkerModeAutomatic",{useMarkerCluster:!0})):n&&s==="markers"&&t<r&&(g.getButton().state("show-markers"),u("changeMarkerModeAutomatic",{useMarkerCluster:!1}))),l.$$.dirty&89&&g&&(f.length===0||t>r?g.getButton().disable():g.getButton().enable())},[g,h,n,t,r,s,f,i,y,k,B]}class Be extends _{constructor(e){super();b(this,e,ye,me,M,{useMarkerCluster:2,observationsDisplayCount:3,clusterLimit:4,userSelectedMarkerType:5,coordinates:6,zoomLevel:7,maxZoom:8,getButton:9})}get getButton(){return this.$$.ctx[9]}}export{Le as M,be as R,Me as S,Ce as a,Be as b,_e as c};
