import{_ as R}from"../../../../chunks/preload-helper-ec9aa979.js";import{S as Q,i as W,s as X,e as x,j as D,t as O,c as T,a as P,d as g,l as L,g as q,b as E,f as M,F as k,h as Y,M as U,O as Z,J as H,L as $,K as N,v as S,w as z,x as C,p as V,n as y,A as B,o as ee,ab as fe,m as te}from"../../../../chunks/vendor-358d5d08.js";import{b as ae}from"../../../../chunks/paths-28a87002.js";import{s as _e}from"../../../../chunks/settings-8f2b275b.js";import{f as F,p as G,t as re}from"../../../../chunks/formatUtils-b852786f.js";import{s as he,r as le}from"../../../../chunks/constants-3d7024b8.js";import{P as me}from"../../../../chunks/project_header-d5a0d11f.js";function se(r,e,a){const t=r.slice();return t[6]=e[a],t}function de(r){let e,a;return{c(){e=x("img"),this.h()},l(t){e=T(t,"IMG",{src:!0,alt:!0}),this.h()},h(){N(e.src,a=""+(ae+"/images/missing-image.png"))||E(e,"src",a),E(e,"alt","")},m(t,l){M(t,e,l)},p:H,d(t){t&&g(e)}}}function ge(r){let e,a,t;return{c(){e=x("img"),this.h()},l(l){e=T(l,"IMG",{src:!0,alt:!0}),this.h()},h(){N(e.src,a=r[6].image_url)||E(e,"src",a),E(e,"alt",t="photo of "+F(r[6]))},m(l,n){M(l,e,n)},p(l,n){n&2&&!N(e.src,a=l[6].image_url)&&E(e,"src",a),n&2&&t!==(t="photo of "+F(l[6]))&&E(e,"alt",t)},d(l){l&&g(e)}}}function ie(r){let e,a,t,l,n,u,d=F(r[6],!0)+"",h,c,o=G("observation",r[6].taxa_count)+"",v,i,f;function w(s,m){return s[6].image_url?ge:de}let p=w(r),_=p(r);return{c(){e=x("div"),a=x("a"),t=x("figure"),_.c(),l=D(),n=x("div"),u=x("div"),h=D(),c=x("div"),v=O(o),f=D(),this.h()},l(s){e=T(s,"DIV",{class:!0});var m=P(e);a=T(m,"A",{href:!0});var b=P(a);t=T(b,"FIGURE",{});var j=P(t);_.l(j),j.forEach(g),l=L(b),n=T(b,"DIV",{class:!0});var I=P(n);u=T(I,"DIV",{class:!0});var A=P(u);A.forEach(g),h=L(I),c=T(I,"DIV",{});var K=P(c);v=q(K,o),K.forEach(g),I.forEach(g),b.forEach(g),f=L(m),m.forEach(g),this.h()},h(){E(u,"class","text-lg font-medium leading-normal"),E(n,"class","image-card-body"),E(a,"href",i=""+(r[0]+"/taxa/"+r[6].taxon_id)),E(e,"class","image-card")},m(s,m){M(s,e,m),k(e,a),k(a,t),_.m(t,null),k(a,l),k(a,n),k(n,u),u.innerHTML=d,k(n,h),k(n,c),k(c,v),k(e,f)},p(s,m){p===(p=w(s))&&_?_.p(s,m):(_.d(1),_=p(s),_&&(_.c(),_.m(t,null))),m&2&&d!==(d=F(s[6],!0)+"")&&(u.innerHTML=d),m&2&&o!==(o=G("observation",s[6].taxa_count)+"")&&Y(v,o),m&3&&i!==(i=""+(s[0]+"/taxa/"+s[6].taxon_id))&&E(a,"href",i)},d(s){s&&g(e),_.d()}}}function ve(r){let e,a,t,l,n,u,d,h=r[1],c=[];for(let o=0;o<h.length;o+=1)c[o]=ie(se(r,h,o));return{c(){e=x("div");for(let o=0;o<c.length;o+=1)c[o].c();a=D(),t=x("div"),l=x("button"),n=O("Load More"),this.h()},l(o){e=T(o,"DIV",{class:!0});var v=P(e);for(let w=0;w<c.length;w+=1)c[w].l(v);v.forEach(g),a=L(o),t=T(o,"DIV",{class:!0});var i=P(t);l=T(i,"BUTTON",{class:!0});var f=P(l);n=q(f,"Load More"),f.forEach(g),i.forEach(g),this.h()},h(){E(e,"class","grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 justify-center gap-3"),E(l,"class","btn"),U(l,"hidden",!r[2]),E(t,"class","grid justify-items-center mt-8")},m(o,v){M(o,e,v);for(let i=0;i<c.length;i+=1)c[i].m(e,null);M(o,a,v),M(o,t,v),k(t,l),k(l,n),u||(d=Z(l,"click",r[3]),u=!0)},p(o,[v]){if(v&3){h=o[1];let i;for(i=0;i<h.length;i+=1){const f=se(o,h,i);c[i]?c[i].p(f,v):(c[i]=ie(f),c[i].c(),c[i].m(e,null))}for(;i<c.length;i+=1)c[i].d(1);c.length=h.length}v&4&&U(l,"hidden",!o[2])},i:H,o:H,d(o){o&&g(e),$(c,o),o&&g(a),o&&g(t),u=!1,d()}}}let J=24;function pe(r,e,a){let t,l,{taxa:n}=e,{projectPath:u}=e,d=1;function h(){a(5,d=d+1),a(1,t=n.slice(0,d*J))}return r.$$set=c=>{"taxa"in c&&a(4,n=c.taxa),"projectPath"in c&&a(0,u=c.projectPath)},r.$$.update=()=>{r.$$.dirty&48&&a(1,t=n.slice(0,d*J)),r.$$.dirty&48&&a(2,l=d*J<n.length)},[u,t,l,h,n,d]}class be extends Q{constructor(e){super();W(this,e,pe,ve,X,{taxa:4,projectPath:0})}}function ke(r){switch(r){case"../../../../lib/data/cedar-creek-reserve/taxa.md":return R(()=>import("../../../../chunks/taxa-c233e52d.js"),[]);default:return new Promise(function(e,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function je(r){switch(r){case"../../../../lib/data/cedar-creek-reserve/taxa.csv":return R(()=>import("../../../../chunks/taxa-f4c5fea7.js"),[]);case"../../../../lib/data/ciencia-ciudadana-peru-bats/taxa.csv":return R(()=>import("../../../../chunks/taxa-9108f66a.js"),[]);case"../../../../lib/data/ciencia-ciudadana-peru-bees/taxa.csv":return R(()=>import("../../../../chunks/taxa-104f431f.js"),[]);case"../../../../lib/data/clarkstown-high-school-north/taxa.csv":return R(()=>import("../../../../chunks/taxa-029efbae.js"),[]);case"../../../../lib/data/go-sea/taxa.csv":return R(()=>import("../../../../chunks/taxa-7a9c7f1b.js"),[]);case"../../../../lib/data/los-angeles-bioblitz/taxa.csv":return R(()=>import("../../../../chunks/taxa-99749418.js"),[]);default:return new Promise(function(e,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+r)))})}}function ne(r,e,a){const t=r.slice();return t[9]=e[a],t}function oe(r){let e,a;return e=new fe({props:{source:r[1]}}),{c(){S(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){C(e,t,l),a=!0},p(t,l){const n={};l&2&&(n.source=t[1]),e.$set(n)},i(t){a||(V(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){B(e,t)}}}function ce(r){let e,a=r[9]+"",t,l,n,u;function d(){return r[8](r[9])}return{c(){e=x("li"),t=O(a),l=D(),this.h()},l(h){e=T(h,"LI",{class:!0});var c=P(e);t=q(c,a),l=L(c),c.forEach(g),this.h()},h(){E(e,"class","px-3 svelte-4rgtlk"),U(e,"active",r[9]===r[4])},m(h,c){M(h,e,c),k(e,t),k(e,l),n||(u=Z(e,"click",d),n=!0)},p(h,c){r=h,c&80&&U(e,"active",r[9]===r[4])},d(h){h&&g(e),n=!1,u()}}}function ue(r){let e,a;return e=new be({props:{taxa:r[5],projectPath:r[0]}}),{c(){S(e.$$.fragment)},l(t){z(e.$$.fragment,t)},m(t,l){C(e,t,l),a=!0},p(t,l){const n={};l&32&&(n.taxa=t[5]),l&1&&(n.projectPath=t[0]),e.$set(n)},i(t){a||(V(e.$$.fragment,t),a=!0)},o(t){y(e.$$.fragment,t),a=!1},d(t){B(e,t)}}}function Ee(r){let e,a,t,l,n,u,d=re(G(r[4],r[5].length))+"",h,c,o,v,i;e=new me({props:{org:r[3],project:r[2],activeTab:xe}});let f=r[1].length>0&&oe(r),w=r[6],p=[];for(let s=0;s<w.length;s+=1)p[s]=ce(ne(r,w,s));let _=r[5].length>0&&ue(r);return{c(){S(e.$$.fragment),a=D(),t=x("main"),l=x("div"),f&&f.c(),n=D(),u=x("h1"),h=O(d),c=D(),o=x("ul");for(let s=0;s<p.length;s+=1)p[s].c();v=D(),_&&_.c(),this.h()},l(s){z(e.$$.fragment,s),a=L(s),t=T(s,"MAIN",{class:!0});var m=P(t);l=T(m,"DIV",{class:!0});var b=P(l);f&&f.l(b),n=L(b),u=T(b,"H1",{});var j=P(u);h=q(j,d),j.forEach(g),c=L(b),o=T(b,"UL",{class:!0});var I=P(o);for(let A=0;A<p.length;A+=1)p[A].l(I);I.forEach(g),v=L(b),_&&_.l(b),b.forEach(g),m.forEach(g),this.h()},h(){E(o,"class","submenu svelte-4rgtlk"),E(l,"class","prose max-w-none svelte-4rgtlk"),E(t,"class","container mx-auto")},m(s,m){C(e,s,m),M(s,a,m),M(s,t,m),k(t,l),f&&f.m(l,null),k(l,n),k(l,u),k(u,h),k(l,c),k(l,o);for(let b=0;b<p.length;b+=1)p[b].m(o,null);k(l,v),_&&_.m(l,null),i=!0},p(s,[m]){const b={};if(m&8&&(b.org=s[3]),m&4&&(b.project=s[2]),e.$set(b),s[1].length>0?f?(f.p(s,m),m&2&&V(f,1)):(f=oe(s),f.c(),V(f,1),f.m(l,n)):f&&(te(),y(f,1,1,()=>{f=null}),ee()),(!i||m&48)&&d!==(d=re(G(s[4],s[5].length))+"")&&Y(h,d),m&80){w=s[6];let j;for(j=0;j<w.length;j+=1){const I=ne(s,w,j);p[j]?p[j].p(I,m):(p[j]=ce(I),p[j].c(),p[j].m(o,null))}for(;j<p.length;j+=1)p[j].d(1);p.length=w.length}s[5].length>0?_?(_.p(s,m),m&32&&V(_,1)):(_=ue(s),_.c(),V(_,1),_.m(l,null)):_&&(te(),y(_,1,1,()=>{_=null}),ee())},i(s){i||(V(e.$$.fragment,s),V(f),V(_),i=!0)},o(s){y(e.$$.fragment,s),y(f),y(_),i=!1},d(s){B(e,s),s&&g(a),s&&g(t),f&&f.d(),$(p,s),_&&_.d()}}}async function Re({params:r}){let e=_e.filter(u=>u.username===r.orgs)[0],a=e.projects.filter(u=>u.slug===r.projects)[0],t,l=`${ae}/orgs/${e.username}/${a.slug}`;a?t=(await je(`../../../../lib/data/${a.slug}/taxa.csv`)).default:(t=[],a={tabs:[]});let n="";return a.has_taxa_text&&(n=(await ke(`../../../../lib/data/${a.slug}/taxa.md`)).default),{props:{taxa:t,projectPath:l,taxaText:n,project:a,org:e}}}let xe="taxa";function Te(r,e,a){let{taxa:t}=e,{projectPath:l}=e,{taxaText:n}=e,{project:u}=e,{org:d}=e,h=[],c=le,o="species";const v=i=>a(4,o=i);return r.$$set=i=>{"taxa"in i&&a(7,t=i.taxa),"projectPath"in i&&a(0,l=i.projectPath),"taxaText"in i&&a(1,n=i.taxaText),"project"in i&&a(2,u=i.project),"org"in i&&a(3,d=i.org)},r.$$.update=()=>{r.$$.dirty&144&&(o==="species"?a(5,h=t.filter(i=>i.observations_count>0&&he.includes(i.rank))):le.includes(o)?a(5,h=t.filter(i=>i.rank===o).sort((i,f)=>f.taxa_count-i.taxa_count)):a(5,h=[]))},[l,n,u,d,o,h,c,t,v]}class ye extends Q{constructor(e){super();W(this,e,Te,Ee,X,{taxa:7,projectPath:0,taxaText:1,project:2,org:3})}}export{ye as default,Re as load};
