var _e=Object.defineProperty,fe=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var te=(t,s,a)=>s in t?_e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,se=(t,s)=>{for(var a in s||(s={}))de.call(s,a)&&te(t,a,s[a]);if(ee)for(var a of ee(s))ve.call(s,a)&&te(t,a,s[a]);return t},ae=(t,s)=>fe(t,me(s));import{_ as h}from"../../../../../../../chunks/preload-helper-ec9aa979.js";import{S as be,i as he,s as pe,v as N,w as G,x as y,p as E,n as L,A as B,j as z,e as U,t as X,l as q,c as H,a as S,g as Y,d as w,b as x,f as re,F as f,h as ne,o as oe,u as ge,m as ie}from"../../../../../../../chunks/vendor-35134e52.js";import{a as je,L as ke}from"../../../../../../../chunks/observation_data-51629536.js";import{b as Ee}from"../../../../../../../chunks/paths-28a87002.js";import{s as we}from"../../../../../../../chunks/settings-8f2b275b.js";import{d as Pe}from"../../../../../../../chunks/mapUtils-e9636914.js";import{O as Te}from"../../../../../../../chunks/observation_basic-da086332.js";import{T as Oe}from"../../../../../../../chunks/taxa_images-4f14cb3a.js";import{f as ue,p as le}from"../../../../../../../chunks/formatUtils-b852786f.js";import{P as De}from"../../../../../../../chunks/project_header-30b6b382.js";import"../../../../../../../chunks/dataUtils-977db69d.js";import"../../../../../../../chunks/constants-3d7024b8.js";function Le(t){switch(t){case"../../../../../../../lib/data/cedar-creek-reserve/observations.csv":return h(()=>import("../../../../../../../chunks/observations-cd1c9750.js"),[]);case"../../../../../../../lib/data/ciencia-ciudadana-peru-bats/observations.csv":return h(()=>import("../../../../../../../chunks/observations-12342442.js"),[]);case"../../../../../../../lib/data/ciencia-ciudadana-peru-bees/observations.csv":return h(()=>import("../../../../../../../chunks/observations-500a5170.js"),[]);case"../../../../../../../lib/data/clarkstown-high-school-north/observations.csv":return h(()=>import("../../../../../../../chunks/observations-7e615f63.js"),[]);case"../../../../../../../lib/data/go-sea/observations.csv":return h(()=>import("../../../../../../../chunks/observations-6fba9f9e.js"),[]);case"../../../../../../../lib/data/los-angeles-bioblitz/observations.csv":return h(()=>import("../../../../../../../chunks/observations-85254984.js"),[]);default:return new Promise(function(s,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function Ie(t){switch(t){case"../../../../../../../lib/data/cedar-creek-reserve/users.csv":return h(()=>import("../../../../../../../chunks/users-a95b995e.js"),[]);case"../../../../../../../lib/data/ciencia-ciudadana-peru-bats/users.csv":return h(()=>import("../../../../../../../chunks/users-44c615ec.js"),[]);case"../../../../../../../lib/data/ciencia-ciudadana-peru-bees/users.csv":return h(()=>import("../../../../../../../chunks/users-280deaa4.js"),[]);case"../../../../../../../lib/data/clarkstown-high-school-north/users.csv":return h(()=>import("../../../../../../../chunks/users-fb306347.js"),[]);case"../../../../../../../lib/data/go-sea/users.csv":return h(()=>import("../../../../../../../chunks/users-59a261af.js"),[]);case"../../../../../../../lib/data/los-angeles-bioblitz/users.csv":return h(()=>import("../../../../../../../chunks/users-ee6c1fc1.js"),[]);default:return new Promise(function(s,a){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}function ce(t){let s,a;return s=new ke({}),{c(){N(s.$$.fragment)},l(i){G(s.$$.fragment,i)},m(i,l){y(s,i,l),a=!0},i(i){a||(E(s.$$.fragment,i),a=!0)},o(i){L(s.$$.fragment,i),a=!1},d(i){B(s,i)}}}function Re(t){let s,a,i,l,m,j,_=t[0].user_login+"",P,k,v,p=ue(t[4],!0,!0,!0)+"",T,r,I=le("observation",t[1].length)+"",R,F,n,b,Q,g,J,o,W,O,V;s=new De({props:{org:t[5],project:t[3],activeTab:Ve}}),b=new Te({props:{observation:t[9],projectPath:t[2],taxon:t[4]}}),b.$on("zoomToObservation",t[11]);let c=t[7]&&ce();var A=t[8];function Z(e){return{props:{mapOptions:e[12],observations:e[1],mapCenter:e[6],project:e[3],taxon:e[4],limitTaxaToSpecies:!1}}}return A&&(o=new A(Z(t)),o.$on("doneLoading",t[13]),o.$on("markerClick",t[10])),O=new Oe({props:{observations:t[1],taxon:t[4],projectPath:t[2]}}),{c(){N(s.$$.fragment),a=z(),i=U("main"),l=U("div"),m=U("h1"),j=X("observer: "),P=X(_),k=z(),v=U("h1"),T=z(),r=U("h2"),R=X(I),F=z(),n=U("div"),N(b.$$.fragment),Q=z(),g=U("div"),c&&c.c(),J=z(),o&&N(o.$$.fragment),W=z(),N(O.$$.fragment),this.h()},l(e){G(s.$$.fragment,e),a=q(e),i=H(e,"MAIN",{class:!0});var u=S(i);l=H(u,"DIV",{class:!0});var d=S(l);m=H(d,"H1",{class:!0});var D=S(m);j=Y(D,"observer: "),P=Y(D,_),D.forEach(w),k=q(d),v=H(d,"H1",{class:!0});var C=S(v);C.forEach(w),T=q(d),r=H(d,"H2",{class:!0});var M=S(r);R=Y(M,I),M.forEach(w),F=q(d),n=H(d,"DIV",{class:!0});var $=S(n);G(b.$$.fragment,$),Q=q($),g=H($,"DIV",{class:!0});var K=S(g);c&&c.l(K),J=q(K),o&&G(o.$$.fragment,K),K.forEach(w),$.forEach(w),W=q(d),G(O.$$.fragment,d),d.forEach(w),u.forEach(w),this.h()},h(){x(m,"class","svelte-1hfikjb"),x(v,"class","svelte-1hfikjb"),x(r,"class","subtitle svelte-1hfikjb"),x(g,"class","relative"),x(n,"class","grid md:grid-cols-2 gap-3"),x(l,"class","prose max-w-none svelte-1hfikjb"),x(i,"class","container mx-auto")},m(e,u){y(s,e,u),re(e,a,u),re(e,i,u),f(i,l),f(l,m),f(m,j),f(m,P),f(l,k),f(l,v),v.innerHTML=p,f(l,T),f(l,r),f(r,R),f(l,F),f(l,n),y(b,n,null),f(n,Q),f(n,g),c&&c.m(g,null),f(g,J),o&&y(o,g,null),f(l,W),y(O,l,null),V=!0},p(e,[u]){const d={};u&32&&(d.org=e[5]),u&8&&(d.project=e[3]),s.$set(d),(!V||u&1)&&_!==(_=e[0].user_login+"")&&ne(P,_),(!V||u&16)&&p!==(p=ue(e[4],!0,!0,!0)+"")&&(v.innerHTML=p),(!V||u&2)&&I!==(I=le("observation",e[1].length)+"")&&ne(R,I);const D={};u&512&&(D.observation=e[9]),u&4&&(D.projectPath=e[2]),u&16&&(D.taxon=e[4]),b.$set(D),e[7]?c?u&128&&E(c,1):(c=ce(),c.c(),E(c,1),c.m(g,J)):c&&(ie(),L(c,1,1,()=>{c=null}),oe());const C={};if(u&2&&(C.observations=e[1]),u&64&&(C.mapCenter=e[6]),u&8&&(C.project=e[3]),u&16&&(C.taxon=e[4]),A!==(A=e[8])){if(o){ie();const $=o;L($.$$.fragment,1,0,()=>{B($,1)}),oe()}A?(o=new A(Z(e)),o.$on("doneLoading",e[13]),o.$on("markerClick",e[10]),N(o.$$.fragment),E(o.$$.fragment,1),y(o,g,null)):o=null}else A&&o.$set(C);const M={};u&2&&(M.observations=e[1]),u&16&&(M.taxon=e[4]),u&4&&(M.projectPath=e[2]),O.$set(M)},i(e){V||(E(s.$$.fragment,e),E(b.$$.fragment,e),E(c),o&&E(o.$$.fragment,e),E(O.$$.fragment,e),V=!0)},o(e){L(s.$$.fragment,e),L(b.$$.fragment,e),L(c),o&&L(o.$$.fragment,e),L(O.$$.fragment,e),V=!1},d(e){B(s,e),e&&w(a),e&&w(i),B(b),c&&c.d(),o&&B(o),B(O)}}}async function Ge({params:t}){let s=we.filter(r=>r.username===t.orgs)[0],a=s.projects.filter(r=>r.slug===t.projects)[0],i=`${Ee}/orgs/${s.username}/${a.slug}`,j=(await Ie(`../../../../../../../lib/data/${a.slug}/users.csv`)).default.filter(r=>r.user_id==t.user_id)[0],_=await Le(`../../../../../../../lib/data/${t.projects}/observations.csv`),k=je(_.default).filter(r=>r.user_login==j.user_login&&r.taxon_id==t.taxon_id),v={},p={};k.forEach(r=>{r.taxon_id==0||(v[r.taxon_id]?(v[r.taxon_id]+=1,p[r.taxon_id].taxa_count+=1):(v[r.taxon_id]=1,p[r.taxon_id]={common_name:r.common_name,image_url:r.image_url,rank:r.rank,scientific_name:r.scientific_name,taxon_id:r.taxon_id,taxa_count:1}))});let T=Object.values(p)[0];return{props:{project:a,projectPath:i,user:j,observations:k,taxon:T,org:s}}}let Ve="users";function Ae(t,s,a){let i,{user:l}=s,{observations:m}=s,{projectPath:j}=s,{project:_}=s,{taxon:P}=s,{org:k}=s;function v(n){a(9,i=m.filter(b=>b.id===n.detail.observation_id)[0])}function p(n){a(6,T=n.detail),a(9,i=m.filter(b=>b.id===n.detail.observation_id)[0])}let T={},r=!0,I=ae(se({},Pe),{zoom:_.zoom,latitude:_.latitude,longitude:_.longitude,observationsTimeSpan:_.observations_time_span,center:[_.latitude||0,_.longitude||0],preferCanvas:!0}),R;ge(async()=>{const n=await h(()=>import("../../../../../../../chunks/taxa_map-e4f1d745.js"),["chunks/taxa_map-e4f1d745.js","assets/taxa_map-2926e294.css","chunks/vendor-35134e52.js","assets/vendor-9877410d.css","chunks/index-4cf94f11.js","assets/index-a02ee4b4.css","chunks/mapUtils-e9636914.js","chunks/dataUtils-977db69d.js","chunks/formatUtils-b852786f.js","chunks/constants-3d7024b8.js","chunks/bar_chart-06d6f597.js","assets/bar_chart-b2bb72e2.css","chunks/map_toggle_marker_type_button-8607250c.js","chunks/CircleMarker-295969fc.js"]);a(8,R=n.default)});const F=()=>a(7,r=!1);return t.$$set=n=>{"user"in n&&a(0,l=n.user),"observations"in n&&a(1,m=n.observations),"projectPath"in n&&a(2,j=n.projectPath),"project"in n&&a(3,_=n.project),"taxon"in n&&a(4,P=n.taxon),"org"in n&&a(5,k=n.org)},t.$$.update=()=>{t.$$.dirty&2&&a(9,i=m[0])},[l,m,j,_,P,k,T,r,R,i,v,p,I,F]}class Je extends be{constructor(s){super();he(this,s,Ae,Re,pe,{user:0,observations:1,projectPath:2,project:3,taxon:4,org:5})}}export{Je as default,Ge as load};
