import{S as X,i as Y,s as Z,e as h,k as D,t as G,c as f,a as v,d,n as V,g as T,b as g,f as A,E as i,I as H,K as $,J as R}from"../../../../chunks/vendor-a1a75673.js";import{b as z}from"../../../../chunks/paths-28a87002.js";import{f as B,p as ee}from"../../../../chunks/formatUtils-77b182ad.js";import{s as te}from"../../../../chunks/settings-ef690396.js";import ae from"../../../../chunks/taxa-99749418.js";function O(s,e,t){const a=s.slice();return a[3]=e[t],a}function re(s){let e,t;return{c(){e=h("img"),this.h()},l(a){e=f(a,"IMG",{src:!0,alt:!0}),this.h()},h(){R(e.src,t=""+(z+"/images/missing-image.png"))||g(e,"src",t),g(e,"alt","")},m(a,c){A(a,e,c)},p:H,d(a){a&&d(e)}}}function se(s){let e,t;return{c(){e=h("img"),this.h()},l(a){e=f(a,"IMG",{src:!0,alt:!0}),this.h()},h(){R(e.src,t=s[3].image_url)||g(e,"src",t),g(e,"alt","photo of "+B(s[3]))},m(a,c){A(a,e,c)},p:H,d(a){a&&d(e)}}}function P(s){let e,t,a,c,n,u,x=B(s[3],!0)+"",p,_,o=ee("observation",s[3].observations_count)+"",l,I,r,b=s[3].taxon_group+"",y,j,M,C=s[3].type+"",N,q,U;function Q(m,k){return m[3].image_url?se:re}let S=Q(s)(s);return{c(){e=h("div"),t=h("a"),a=h("figure"),S.c(),c=D(),n=h("div"),u=h("div"),p=D(),_=h("div"),l=G(o),I=D(),r=h("div"),y=G(b),j=D(),M=h("div"),N=G(C),U=D(),this.h()},l(m){e=f(m,"DIV",{class:!0});var k=v(e);t=f(k,"A",{href:!0});var w=v(t);a=f(w,"FIGURE",{});var F=v(a);S.l(F),F.forEach(d),c=V(w),n=f(w,"DIV",{class:!0});var E=v(n);u=f(E,"DIV",{class:!0});var W=v(u);W.forEach(d),p=V(E),_=f(E,"DIV",{});var J=v(_);l=T(J,o),J.forEach(d),I=V(E),r=f(E,"DIV",{});var K=v(r);y=T(K,b),K.forEach(d),j=V(E),M=f(E,"DIV",{});var L=v(M);N=T(L,C),L.forEach(d),E.forEach(d),w.forEach(d),U=V(k),k.forEach(d),this.h()},h(){g(u,"class","text-lg font-medium leading-normal"),g(n,"class","image-card-body"),g(t,"href",q=""+(z+"/users/"+s[0].username+"/"+s[1].slug+"/taxa/"+s[3].taxon_id)),g(e,"class","image-card")},m(m,k){A(m,e,k),i(e,t),i(t,a),S.m(a,null),i(t,c),i(t,n),i(n,u),u.innerHTML=x,i(n,p),i(n,_),i(_,l),i(n,I),i(n,r),i(r,y),i(n,j),i(n,M),i(M,N),i(e,U)},p(m,k){S.p(m,k),k&3&&q!==(q=""+(z+"/users/"+m[0].username+"/"+m[1].slug+"/taxa/"+m[3].taxon_id))&&g(t,"href",q)},d(m){m&&d(e),S.d()}}}function le(s){let e,t,a,c=s[2].length+"",n,u,x,p,_=s[2],o=[];for(let l=0;l<_.length;l+=1)o[l]=P(O(s,_,l));return{c(){e=h("main"),t=h("div"),a=h("h1"),n=G(c),u=G(" Indicator Species"),x=D(),p=h("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=f(l,"MAIN",{class:!0});var I=v(e);t=f(I,"DIV",{class:!0});var r=v(t);a=f(r,"H1",{});var b=v(a);n=T(b,c),u=T(b," Indicator Species"),b.forEach(d),x=V(r),p=f(r,"DIV",{class:!0});var y=v(p);for(let j=0;j<o.length;j+=1)o[j].l(y);y.forEach(d),r.forEach(d),I.forEach(d),this.h()},h(){g(p,"class","grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 justify-center gap-3"),g(t,"class","prose max-w-none"),g(e,"class","container mx-auto")},m(l,I){A(l,e,I),i(e,t),i(t,a),i(a,n),i(a,u),i(t,x),i(t,p);for(let r=0;r<o.length;r+=1)o[r].m(p,null)},p(l,[I]){if(I&7){_=l[2];let r;for(r=0;r<_.length;r+=1){const b=O(l,_,r);o[r]?o[r].p(b,I):(o[r]=P(b),o[r].c(),o[r].m(p,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=_.length}},i:H,o:H,d(l){l&&d(e),$(o,l)}}}async function fe({page:s}){let e=s.path.split("/"),t=te.filter(c=>c.username===e[2])[0],a=t.projects.filter(c=>c.slug===e[3])[0];return{props:{user:t,project:a}}}function ie(s,e,t){let a=ae.filter(u=>!!u.taxon_group),{user:c}=e,{project:n}=e;return s.$$set=u=>{"user"in u&&t(0,c=u.user),"project"in u&&t(1,n=u.project)},[c,n,a]}class _e extends X{constructor(e){super();Y(this,e,ie,le,Z,{user:0,project:1})}}export{_e as default,fe as load};
