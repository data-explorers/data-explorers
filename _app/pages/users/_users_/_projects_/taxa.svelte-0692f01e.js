import{_ as L}from"../../../../chunks/preload-helper-768eda0e.js";import{S as F,i as S,s as B,e as j,j as D,t as y,c as E,a as I,d as m,l as T,g as M,b as v,f as P,F as g,h as J,N as R,Q as K,J as q,L as Q,K as N,v as le,w as re,x as ie,p as A,n as G,A as ne,o as oe,m as ce}from"../../../../chunks/vendor-ac733917.js";import{b as W}from"../../../../chunks/paths-28a87002.js";import{s as ue}from"../../../../chunks/settings-335072b9.js";import{f as O,p as U,t as X}from"../../../../chunks/formatUtils-77b182ad.js";import{s as fe,r as Y}from"../../../../chunks/constants-3d7024b8.js";function Z(s,e,t){const a=s.slice();return a[6]=e[t],a}function _e(s){let e,t;return{c(){e=j("img"),this.h()},l(a){e=E(a,"IMG",{src:!0,alt:!0}),this.h()},h(){N(e.src,t=""+(W+"/images/missing-image.png"))||v(e,"src",t),v(e,"alt","")},m(a,r){P(a,e,r)},p:q,d(a){a&&m(e)}}}function he(s){let e,t,a;return{c(){e=j("img"),this.h()},l(r){e=E(r,"IMG",{src:!0,alt:!0}),this.h()},h(){N(e.src,t=s[6].image_url)||v(e,"src",t),v(e,"alt",a="photo of "+O(s[6]))},m(r,i){P(r,e,i)},p(r,i){i&2&&!N(e.src,t=r[6].image_url)&&v(e,"src",t),i&2&&a!==(a="photo of "+O(r[6]))&&v(e,"alt",a)},d(r){r&&m(e)}}}function $(s){let e,t,a,r,i,d,f=O(s[6],!0)+"",h,l,o=U("observation",s[6].taxa_count)+"",u,n,c;function b(p,x){return p[6].image_url?he:_e}let _=b(s),k=_(s);return{c(){e=j("div"),t=j("a"),a=j("figure"),k.c(),r=D(),i=j("div"),d=j("div"),h=D(),l=j("div"),u=y(o),c=D(),this.h()},l(p){e=E(p,"DIV",{class:!0});var x=I(e);t=E(x,"A",{href:!0});var V=I(t);a=E(V,"FIGURE",{});var z=I(a);k.l(z),z.forEach(m),r=T(V),i=E(V,"DIV",{class:!0});var w=I(i);d=E(w,"DIV",{class:!0});var se=I(d);se.forEach(m),h=T(w),l=E(w,"DIV",{});var C=I(l);u=M(C,o),C.forEach(m),w.forEach(m),V.forEach(m),c=T(x),x.forEach(m),this.h()},h(){v(d,"class","text-lg font-medium leading-normal"),v(i,"class","image-card-body"),v(t,"href",n=""+(s[0]+"/taxa/"+s[6].taxon_id)),v(e,"class","image-card")},m(p,x){P(p,e,x),g(e,t),g(t,a),k.m(a,null),g(t,r),g(t,i),g(i,d),d.innerHTML=f,g(i,h),g(i,l),g(l,u),g(e,c)},p(p,x){_===(_=b(p))&&k?k.p(p,x):(k.d(1),k=_(p),k&&(k.c(),k.m(a,null))),x&2&&f!==(f=O(p[6],!0)+"")&&(d.innerHTML=f),x&2&&o!==(o=U("observation",p[6].taxa_count)+"")&&J(u,o),x&3&&n!==(n=""+(p[0]+"/taxa/"+p[6].taxon_id))&&v(t,"href",n)},d(p){p&&m(e),k.d()}}}function de(s){let e,t,a,r,i,d,f,h=s[1],l=[];for(let o=0;o<h.length;o+=1)l[o]=$(Z(s,h,o));return{c(){e=j("div");for(let o=0;o<l.length;o+=1)l[o].c();t=D(),a=j("div"),r=j("button"),i=y("Load More"),this.h()},l(o){e=E(o,"DIV",{class:!0});var u=I(e);for(let b=0;b<l.length;b+=1)l[b].l(u);u.forEach(m),t=T(o),a=E(o,"DIV",{class:!0});var n=I(a);r=E(n,"BUTTON",{class:!0});var c=I(r);i=M(c,"Load More"),c.forEach(m),n.forEach(m),this.h()},h(){v(e,"class","grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 justify-center gap-3"),v(r,"class","btn"),R(r,"hidden",!s[2]),v(a,"class","grid justify-items-center mt-8")},m(o,u){P(o,e,u);for(let n=0;n<l.length;n+=1)l[n].m(e,null);P(o,t,u),P(o,a,u),g(a,r),g(r,i),d||(f=K(r,"click",s[3]),d=!0)},p(o,[u]){if(u&3){h=o[1];let n;for(n=0;n<h.length;n+=1){const c=Z(o,h,n);l[n]?l[n].p(c,u):(l[n]=$(c),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=h.length}u&4&&R(r,"hidden",!o[2])},i:q,o:q,d(o){o&&m(e),Q(l,o),o&&m(t),o&&m(a),d=!1,f()}}}let H=24;function me(s,e,t){let a,r,{taxa:i}=e,{projectPath:d}=e,f=1;function h(){t(5,f=f+1),t(1,a=i.slice(0,f*H))}return s.$$set=l=>{"taxa"in l&&t(4,i=l.taxa),"projectPath"in l&&t(0,d=l.projectPath)},s.$$.update=()=>{s.$$.dirty&48&&t(1,a=i.slice(0,f*H)),s.$$.dirty&48&&t(2,r=f*H<i.length)},[d,a,r,h,i,f]}class ge extends F{constructor(e){super();S(this,e,me,de,B,{taxa:4,projectPath:0})}}function pe(s){switch(s){case"../../../../lib/data/cedar-creek-reserve/taxa.csv":return L(()=>import("../../../../chunks/taxa-f4c5fea7.js"),[]);case"../../../../lib/data/ciencia-ciudadana-peru-bats/taxa.csv":return L(()=>import("../../../../chunks/taxa-9108f66a.js"),[]);case"../../../../lib/data/ciencia-ciudadana-peru-bees/taxa.csv":return L(()=>import("../../../../chunks/taxa-104f431f.js"),[]);case"../../../../lib/data/clarkstown-high-school-north/taxa.csv":return L(()=>import("../../../../chunks/taxa-029efbae.js"),[]);case"../../../../lib/data/go-sea/taxa.csv":return L(()=>import("../../../../chunks/taxa-6068ec6b.js"),[]);case"../../../../lib/data/los-angeles-bioblitz/taxa.csv":return L(()=>import("../../../../chunks/taxa-99749418.js"),[]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function ee(s,e,t){const a=s.slice();return a[6]=e[t],a}function te(s){let e,t=s[6]+"",a,r,i,d;function f(){return s[5](s[6])}return{c(){e=j("li"),a=y(t),r=D(),this.h()},l(h){e=E(h,"LI",{class:!0});var l=I(e);a=M(l,t),r=T(l),l.forEach(m),this.h()},h(){v(e,"class","px-3 svelte-4rgtlk"),R(e,"active",s[6]===s[1])},m(h,l){P(h,e,l),g(e,a),g(e,r),i||(d=K(e,"click",f),i=!0)},p(h,l){s=h,l&10&&R(e,"active",s[6]===s[1])},d(h){h&&m(e),i=!1,d()}}}function ae(s){let e,t;return e=new ge({props:{taxa:s[2],projectPath:s[0]}}),{c(){le(e.$$.fragment)},l(a){re(e.$$.fragment,a)},m(a,r){ie(e,a,r),t=!0},p(a,r){const i={};r&4&&(i.taxa=a[2]),r&1&&(i.projectPath=a[0]),e.$set(i)},i(a){t||(A(e.$$.fragment,a),t=!0)},o(a){G(e.$$.fragment,a),t=!1},d(a){ne(e,a)}}}function ve(s){let e,t,a,r=X(U(s[1],s[2].length))+"",i,d,f,h,l,o=s[3],u=[];for(let c=0;c<o.length;c+=1)u[c]=te(ee(s,o,c));let n=s[2].length>0&&ae(s);return{c(){e=j("main"),t=j("div"),a=j("h1"),i=y(r),d=D(),f=j("ul");for(let c=0;c<u.length;c+=1)u[c].c();h=D(),n&&n.c(),this.h()},l(c){e=E(c,"MAIN",{class:!0});var b=I(e);t=E(b,"DIV",{class:!0});var _=I(t);a=E(_,"H1",{});var k=I(a);i=M(k,r),k.forEach(m),d=T(_),f=E(_,"UL",{class:!0});var p=I(f);for(let x=0;x<u.length;x+=1)u[x].l(p);p.forEach(m),h=T(_),n&&n.l(_),_.forEach(m),b.forEach(m),this.h()},h(){v(f,"class","submenu svelte-4rgtlk"),v(t,"class","prose max-w-none svelte-4rgtlk"),v(e,"class","container mx-auto")},m(c,b){P(c,e,b),g(e,t),g(t,a),g(a,i),g(t,d),g(t,f);for(let _=0;_<u.length;_+=1)u[_].m(f,null);g(t,h),n&&n.m(t,null),l=!0},p(c,[b]){if((!l||b&6)&&r!==(r=X(U(c[1],c[2].length))+"")&&J(i,r),b&10){o=c[3];let _;for(_=0;_<o.length;_+=1){const k=ee(c,o,_);u[_]?u[_].p(k,b):(u[_]=te(k),u[_].c(),u[_].m(f,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=o.length}c[2].length>0?n?(n.p(c,b),b&4&&A(n,1)):(n=ae(c),n.c(),A(n,1),n.m(t,null)):n&&(ce(),G(n,1,1,()=>{n=null}),oe())},i(c){l||(A(n),l=!0)},o(c){G(n),l=!1},d(c){c&&m(e),Q(u,c),n&&n.d()}}}async function De({params:s}){let e=ue.filter(i=>i.username===s.users)[0],t=e.projects.filter(i=>i.slug===s.projects)[0],a,r=`${W}/users/${e.username}/${t.slug}`;return t?a=(await pe(`../../../../lib/data/${t.slug}/taxa.csv`)).default:(a=[],t={tabs:[]}),{props:{taxa:a,projectPath:r}}}function be(s,e,t){let{taxa:a}=e,{projectPath:r}=e,i=[],d=Y,f="species";const h=l=>t(1,f=l);return s.$$set=l=>{"taxa"in l&&t(4,a=l.taxa),"projectPath"in l&&t(0,r=l.projectPath)},s.$$.update=()=>{s.$$.dirty&18&&(f==="species"?t(2,i=a.filter(l=>l.observations_count>0&&fe.includes(l.rank))):Y.includes(f)?t(2,i=a.filter(l=>l.rank===f).sort((l,o)=>o.taxa_count-l.taxa_count)):t(2,i=[]))},[r,f,i,d,a,h]}class Te extends F{constructor(e){super();S(this,e,be,ve,B,{taxa:4,projectPath:0})}}export{Te as default,De as load};
